# Flowaxy CMS

–°—É—á–∞—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (CMS) –Ω–∞ PHP 8.3+, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—Ä–∞—Å–∏–≤–∏—Ö –ª–µ–Ω–¥—ñ–Ω–≥–æ–≤–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ —Ç–∞ –≤–µ–±-—Å–∞–π—Ç—ñ–≤.

## üìã –í–∏–º–æ–≥–∏

- **PHP**: 8.3 –∞–±–æ –≤–∏—â–µ
- **MySQL**: 5.7+ –∞–±–æ MariaDB 10.3+
- **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è PHP**:
  - PDO
  - PDO_MySQL
  - JSON
  - mbstring
  - GD
  - ZIP
  - cURL
  - OpenSSL
  - FileInfo

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª–∏**
   ```bash
   git clone <repository-url>
   cd flowaxy.com
   ```

2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö**
   - –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `engine/data/database.php`
   - –í–∫–∞–∂—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î:
     ```php
     define('DB_HOST', 'localhost');
     define('DB_NAME', 'db_flowaxy');
     define('DB_USER', 'root');
     define('DB_PASS', '');
     ```

3. **–Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**
   ```bash
   mysql -u root -p db_flowaxy < database.sql
   ```

4. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É**
   –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –º–∞—é—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å:
   - `uploads/`
   - `storage/cache/`
   - `storage/logs/`

5. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä**
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π —Ö–æ—Å—Ç, —è–∫–∏–π –≤–∫–∞–∑—É—î –Ω–∞ –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É
   - –£–≤—ñ–º–∫–Ω—ñ—Ç—å mod_rewrite (–¥–ª—è Apache)
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Nginx –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Nginx)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
flowaxy.com/
‚îú‚îÄ‚îÄ engine/                 # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ classes/           # –ö–ª–∞—Å–∏ —Å–∏—Å—Ç–µ–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base/          # –ë–∞–∑–æ–≤—ñ –∫–ª–∞—Å–∏ (BaseModule, BasePlugin)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data/          # –†–æ–±–æ—Ç–∞ –∑ –¥–∞–Ω–∏–º–∏ (Database, Cache, Logger)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files/          # –†–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers/       # –•–µ–ª–ø–µ—Ä–∏ (UrlHelper, DatabaseHelper, SecurityHelper)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http/           # HTTP –∫–ª–∞—Å–∏ (Router, Request, Response)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ managers/       # –ú–µ–Ω–µ–¥–∂–µ—Ä–∏ (ThemeManager, MenuManager, SettingsManager)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security/       # –ë–µ–∑–ø–µ–∫–∞ (Security, Session, Hash)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ modules/           # –°–∏—Å—Ç–µ–º–Ω—ñ –º–æ–¥—É–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ skins/             # –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ data/              # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ plugins/               # –ü–ª–∞–≥—ñ–Ω–∏
‚îú‚îÄ‚îÄ themes/                # –¢–µ–º—ã
‚îú‚îÄ‚îÄ storage/               # –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ cache/             # –ö–µ—à
‚îÇ   ‚îî‚îÄ‚îÄ logs/              # –õ–æ–≥–∏
‚îî‚îÄ‚îÄ uploads/               # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏
```

## üîß –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º–∏
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥—ñ–Ω—ñ–≤ –∑ —Ö—É–∫–∞–º–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- ‚úÖ –ö–µ—à—É–≤–∞–Ω–Ω—è
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- ‚úÖ –ë–µ–∑–ø–µ–∫–∞ (CSRF, XSS –∑–∞—Ö–∏—Å—Ç)

### –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
- üìä –î–∞—à–±–æ—Ä–¥
- ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∞–π—Ç—É
- üé® –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–µ–º–∞–º–∏
- üîå –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞–º–∏
- üìù –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ–Ω—é
- üìÅ –ú–µ–¥—ñ–∞-–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞
- üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤ `plugins/your-plugin/`
2. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `plugin.json`:
   ```json
   {
     "name": "Your Plugin",
     "slug": "your-plugin",
     "version": "1.0.0",
     "description": "–û–ø–∏—Å –ø–ª–∞–≥—ñ–Ω–∞"
   }
   ```
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–ª–∞—Å –ø–ª–∞–≥—ñ–Ω–∞ `YourPlugin.php`:
   ```php
   <?php
   require_once __DIR__ . '/../../engine/classes/base/BasePlugin.php';
   
   class YourPlugin extends BasePlugin {
       public function registerHooks(): void {
           doHook('some_hook', function($data) {
               // –í–∞—à –∫–æ–¥
           });
       }
   }
   ```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–º–∏

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤ `themes/your-theme/`
2. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `theme.json`:
   ```json
   {
     "name": "Your Theme",
     "slug": "your-theme",
     "version": "1.0.0",
     "description": "–û–ø–∏—Å —Ç–µ–º–∏"
   }
   ```
3. –°—Ç–≤–æ—Ä—ñ—Ç—å `index.php` –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–µ–º–∏

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–ª–∞—Å `Logger`:

```php
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞
$logger = logger();

// –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—ñ–≤
$logger->logDebug('Debug message', ['context' => 'data']);
$logger->logInfo('Info message');
$logger->logWarning('Warning message');
$logger->logError('Error message');
$logger->logCritical('Critical message');

// –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—ñ–≤
try {
    // –∫–æ–¥
} catch (Exception $e) {
    $logger->logException($e);
}
```

–õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `storage/logs/app-YYYY-MM-DD.log`

## üîí –ë–µ–∑–ø–µ–∫–∞

- **CSRF –∑–∞—Ö–∏—Å—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ CSRF –∞—Ç–∞–∫
- **XSS –∑–∞—Ö–∏—Å—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –≤–∏–≤–æ–¥—É
- **–ü—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏**: –í—Å—ñ SQL –∑–∞–ø–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å prepared statements
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö**: –í–±—É–¥–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- **–ë–µ–∑–ø–µ—á–Ω—ñ —Å–µ—Å—ñ—ó**: –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –±–µ–∑–ø–µ—á–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å–µ—Å—ñ–π

## üß™ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (`/admin/diagnostics`), —è–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î:
- –í–µ—Ä—Å—ñ—é PHP —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è PHP
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Å–∏—Å—Ç–µ–º–∏
- –ú–æ–¥—É–ª—ñ —Ç–∞ –ø–ª–∞–≥—ñ–Ω–∏
- –°–∏—Å—Ç–µ–º—É –ª–æ–≥—É–≤–∞–Ω–Ω—è
- –ë–µ–∑–ø–µ–∫—É

## üìö API

### –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

```php
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
$db = DatabaseHelper::getConnection();
// –∞–±–æ —á–µ—Ä–µ–∑ Database –∫–ª–∞—Å
$db = Database::getInstance()->getConnection();

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Database –∫–ª–∞—Å—É –Ω–∞–ø—Ä—è–º—É
$database = Database::getInstance();
$rows = $database->getAll("SELECT * FROM table WHERE id = ?", [$id]);
$row = $database->getRow("SELECT * FROM table WHERE id = ?", [$id]);
$value = $database->getValue("SELECT name FROM table WHERE id = ?", [$id]);
$id = $database->insert("INSERT INTO table (name) VALUES (?)", [$name]);
$database->execute("UPDATE table SET name = ? WHERE id = ?", [$name, $id]);
```

### –†–æ–±–æ—Ç–∞ –∑ –∫–µ—à–µ–º

```php
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è
$value = cache_get('key', 'default');

// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è
cache_set('key', $value, 3600); // TTL –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

// –ó–∞–ø–∞–º'—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è
$value = cache_remember('key', function() {
    return expensiveOperation();
}, 3600);

// –í–∏–¥–∞–ª–µ–Ω–Ω—è
cache_forget('key');

// –û—á–∏—â–µ–Ω–Ω—è –≤—Å—å–æ–≥–æ –∫–µ—à—É
cache_flush();
```

### –†–æ–±–æ—Ç–∞ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏

```php
$settings = settingsManager();

// –û—Ç—Ä–∏–º–∞–Ω–Ω—è
$value = $settings->get('key', 'default');
$all = $settings->all();

// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è
$settings->set('key', 'value');
$settings->setMultiple(['key1' => 'value1', 'key2' => 'value2']);

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
if ($settings->has('key')) {
    // ...
}

// –í–∏–¥–∞–ª–µ–Ω–Ω—è
$settings->delete('key');
```

### –†–æ–±–æ—Ç–∞ –∑ URL

```php
// –ü—Ä–æ—Ç–æ–∫–æ–ª-–≤—ñ–¥–Ω–æ—Å–Ω–∏–π URL
$url = UrlHelper::protocolRelative('path');

// URL –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
$url = UrlHelper::uploads('file.jpg');

// URL –∞–¥–º—ñ–Ω–∫–∏
$url = UrlHelper::admin('settings');

// URL —Å–∞–π—Ç—É
$url = UrlHelper::site('page');

// –ü–æ—Ç–æ—á–Ω–∏–π URL
$url = UrlHelper::current(true); // –∑ query string
```

### –ë–µ–∑–ø–µ–∫–∞

```php
// CSRF —Ç–æ–∫–µ–Ω
$token = SecurityHelper::csrfToken();
$field = SecurityHelper::csrfField();

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ CSRF
if (SecurityHelper::verifyCsrfToken($token)) {
    // ...
}

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
if (SecurityHelper::isAdminLoggedIn()) {
    // ...
}

SecurityHelper::requireAdmin(); // –≤–∏–º–∞–≥–∞—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

// –ë–µ–∑–ø–µ—á–Ω–∏–π –≤–∏–≤—ñ–¥
echo SecurityHelper::safeHtml($userInput);

// –°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è
$clean = SecurityHelper::sanitizeInput($_POST['data']);
```

## üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

–Ø–∫—â–æ –≤–∏ –∑–Ω–∞–π—à–ª–∏ –ø–æ–º–∏–ª–∫—É –∞–±–æ –º–∞—î—Ç–µ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ `storage/logs/`
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å —Ä–µ–∂–∏–º –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ `/admin/diagnostics`
4. –°—Ç–≤–æ—Ä—ñ—Ç—å issue –∑ –æ–ø–∏—Å–æ–º –ø—Ä–æ–±–ª–µ–º–∏

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

## üë• –ê–≤—Ç–æ—Ä–∏

- Spokinoki

## üîÑ –í–µ—Ä—Å—ñ—è

**–ü–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è**: 1.0.0

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É.

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –¶—è CMS –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –¥–ª—è PHP 8.3-8.4 —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—É—á–∞—Å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –º–æ–≤–∏ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –±–µ–∑–ø–µ–∫–∏.

