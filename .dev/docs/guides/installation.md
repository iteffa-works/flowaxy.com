# Установка Flowaxy CMS

## Требования

### Минимальные требования

- **PHP**: 8.4.0 или выше
- **MySQL**: 5.7+ / MariaDB 10.2+
- **Веб-сервер**: Apache 2.4+ (с mod_rewrite) или Nginx 1.18+
- **Память**: минимум 128MB (рекомендуется 256MB+)
- **Дисковое пространство**: 50MB+ (без учета загруженных файлов)

### Рекомендуемые требования

- **PHP**: 8.4+ с включенными расширениями:
  - `pdo_mysql`
  - `mbstring`
  - `json`
  - `zip`
  - `gd` или `imagick` (для обработки изображений)
  - `opcache` (для повышения производительности)

## Установка

### Шаг 1: Загрузка файлов

Загрузите файлы Flowaxy CMS на ваш сервер в корневую директорию веб-сайта.

### Шаг 2: Настройка прав доступа

Установите правильные права доступа для директорий:

```bash
chmod 755 storage/cache
chmod 755 storage/logs
chmod 755 storage/uploads
chmod 755 uploads
```

### Шаг 3: Создание базы данных

Создайте базу данных MySQL/MariaDB для Flowaxy CMS:

```sql
CREATE DATABASE flowaxy_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### Шаг 4: Запуск установщика

Откройте в браузере URL вашего сайта. Система автоматически перенаправит вас на страницу установки.

### Шаг 5: Заполнение формы установки

1. **Параметры базы данных:**
   - Хост БД (обычно `localhost`)
   - Порт БД (обычно `3306`)
   - Имя базы данных
   - Пользователь БД
   - Пароль БД
   - Префикс таблиц (по умолчанию пусто)

2. **Настройки сайта:**
   - Название сайта
   - URL сайта
   - Email администратора
   - Пароль администратора

3. **Настройки языка:**
   - Выберите язык интерфейса

### Шаг 6: Завершение установки

После успешной установки:

1. Система автоматически создаст все необходимые таблицы
2. Будет создан администраторский аккаунт
3. Установщик будет заблокирован для безопасности

### Шаг 7: Первый вход

Войдите в административную панель:
- URL: `https://yourdomain.com/admin`
- Логин: email, указанный при установке
- Пароль: пароль, указанный при установке

## Ручная установка (без установщика)

Если установщик недоступен, можно установить систему вручную:

### 1. Импорт структуры БД

Импортируйте SQL файл структуры базы данных:

```bash
mysql -u username -p database_name < .dev/data/core_tables.sql
```

### 2. Создание администратора

Создайте администраторский аккаунт вручную:

```sql
INSERT INTO users (email, password, role_ids, created_at) 
VALUES (
    'admin@example.com',
    '$2y$10$...', -- хеш пароля (используйте password_hash())
    '["developer"]',
    NOW()
);
```

### 3. Настройка конфигурации

Отредактируйте файл `engine/data/database.ini`:

```ini
[database]
host = localhost
port = 3306
name = flowaxy_db
user = db_user
password = db_password
prefix = 
charset = utf8mb4
```

## Проверка установки

После установки проверьте:

1. ✅ Доступность главной страницы
2. ✅ Доступность админ-панели
3. ✅ Создание файлов в `storage/cache/`
4. ✅ Создание файлов в `storage/logs/`
5. ✅ Работа загрузки файлов

## Решение проблем

### Ошибка подключения к БД

- Проверьте параметры подключения
- Убедитесь, что MySQL/MariaDB запущен
- Проверьте права пользователя БД

### Ошибка прав доступа

- Установите правильные права на директории
- Проверьте владельца файлов (должен совпадать с пользователем веб-сервера)

### Ошибка 500

- Проверьте логи в `storage/logs/`
- Включите отображение ошибок PHP для отладки
- Проверьте версию PHP (должна быть 8.4+)

### Установщик не открывается

- Проверьте, что файл `engine/includes/installer-handler.php` существует
- Проверьте права доступа к файлам
- Проверьте настройки веб-сервера

## Обновление

Для обновления системы:

1. Сделайте резервную копию базы данных
2. Сделайте резервную копию файлов
3. Замените файлы новой версией
4. Запустите миграции (если есть)
5. Очистите кеш через админ-панель

## Безопасность после установки

После установки убедитесь, что:

1. ✅ Установщик заблокирован
2. ✅ Файл `.htaccess` настроен правильно
3. ✅ Права доступа к файлам установлены корректно
4. ✅ SSL сертификат настроен (для продакшена)
5. ✅ Регулярные резервные копии настроены

